{% extends 'base.html.twig' %}

{% block title %}Zmiana hasło{% endblock %}

{% block topbar %}{% endblock %}

{% block sidebar %}{% endblock %}

{% block body %}
    <div class="auth-wrapper d-flex no-block justify-content-center align-items-center" style="background:url({{ asset('assets/images/background/login-register.jpg') }}) no-repeat center center; background-size: cover;">
        <div class="auth-box p-4 bg-white rounded">
            <div>
                <div class="logo">
                    <h3 class="box-title mb-3">Zmiana hasła</h3>
                </div>
                <!-- Form -->
                <div class="row">
                    <div class="col-12">
                        {{ form_start(form) }}
                        <div class="form-group row mb-3">
                            {{ form_row(form.password) }}
                            <div class="col-12 mt-3">
                                <div class="has-danger">
                                    <div class="form-control-feedback" id="first-condition">mieć minimum 8 znaków</div>
                                </div>
                                <div class="has-danger">
                                    <div class="form-control-feedback" id="second-condition">zawierać minimum 1 cyfrę</div>
                                </div>
                                <div class="has-danger">
                                    <div class="form-control-feedback" id="third-condition">zawierać minimum 1 małą literę</div>
                                </div>
                                <div class="has-danger">
                                    <div class="form-control-feedback" id="fourth-condition">zawierać minimum 1 wielką literę</div>
                                </div>
                                <div class="has-danger">
                                    <div class="form-control-feedback" id="fifth-condition">zawierać minimum 1 znak specjalny !@#+=._-</div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group text-center">
                            <div class="col-xs-12">
                                <button class="btn btn-block btn-lg btn-info" type="submit">Zmień</button>
                            </div>
                        </div>
                        {{ form_end(form) }}
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    <script>
        $(".preloader").fadeOut();

        function checkPassword() {
            let password = document.getElementById("password_reset_change_password");
            let first_condition = document.getElementById("first-condition");
            let second_condition = document.getElementById("second-condition");
            let third_condition = document.getElementById("third-condition");
            let fourth_condition = document.getElementById("fourth-condition");
            let fifth_condition = document.getElementById("fifth-condition");

            if(password.value.length >= 8) {
                first_condition.parentElement.classList.add('has-success');
                first_condition.parentElement.classList.remove('has-danger');
            } else {
                first_condition.parentElement.classList.add('has-danger');
                first_condition.parentElement.classList.remove('has-success');
            }

            if(/\d/.test(password.value)) {
                second_condition.parentElement.classList.add('has-success');
                second_condition.parentElement.classList.remove('has-danger');
            } else {
                second_condition.parentElement.classList.add('has-danger');
                second_condition.parentElement.classList.remove('has-success');
            }

            if(/[a-z]/.test(password.value)) {
                third_condition.parentElement.classList.add('has-success');
                third_condition.parentElement.classList.remove('has-danger');
            } else {
                third_condition.parentElement.classList.add('has-danger');
                third_condition.parentElement.classList.remove('has-success');
            }

            if(/[A-Z]/.test(password.value)) {
                fourth_condition.parentElement.classList.add('has-success');
                fourth_condition.parentElement.classList.remove('has-danger');
            } else {
                fourth_condition.parentElement.classList.add('has-danger');
                fourth_condition.parentElement.classList.remove('has-success');
            }

            if(/[!@#+=._-]/.test(password.value)) {
                fifth_condition.parentElement.classList.add('has-success');
                fifth_condition.parentElement.classList.remove('has-danger');
            } else {
                fifth_condition.parentElement.classList.add('has-danger');
                fifth_condition.parentElement.classList.remove('has-success');
            }
        }
    </script>
{% endblock %}